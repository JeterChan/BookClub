# 壓力測試報告 (第三版)

## 1. 測試概述

本報告旨在記錄基於 `single-stage-rps-test.js` 腳本對目標服務 `http://localhost:8000/api/v1/clubs/1` 進行的第三輪壓力測試結果。

**測試計畫:**
根據新的需求，本輪測試旨在更精細地探測系統的性能瓶頸點。測試計畫包含五個連續的、獨立的測試情境，每個情境持續10秒，負載從 100 RPS（每秒請求數）開始，每次遞增 50 RPS，直到 300 RPS。

**測試腳本:**
本輪測試繼續使用第二輪測試中修正後的腳本，其設定為：
*   `preAllocatedVUs: rps * 1`
*   `maxVUs: rps * 1`

**測試指標:**
*   **失敗率:** 請求檢查（Check）失敗的百分比。
*   **最快回應時間:** 所有成功請求中的最短回應時間。
*   **平均回應時間:** 所有成功請求的平均回應時間。
*   **最慢回應時間:** 所有成功請求中的最長回應時間。

## 2. 測試結果摘要

| 負載 (RPS) | 失敗率 | 最快回應時間 (ms) | 平均回應時間 (ms) | 最慢回應時間 (ms) | 備註 |
|:---|:---|:---:|:---:|:---:|:---|
| 100 | 0.00% | 3.51 | 7.45 | 104.26 | 所有檢查通過，性能表現極佳。 |
| 150 | 0.00% | 4.16 | 69.83 | 345.68 | 所有檢查通過，性能表現良好。 |
| 200 | 0.00% | 3.03 | 95.94 | 224.53 | 所有檢查通過，性能表現良好。 |
| 250 | 12.73%| 12.41 | 5,625.14 | 31,027.42 | 系統開始崩潰，出現大量超時。出現「Insufficient VUs」警告，1993 次迭代被丟棄。 |
| 300 | 12.91% | 89.39 | 5,820.00 | 31,090.00 | 系統高度掙扎，有大量超時及失敗。出現「Insufficient VUs」警告，2454 次迭代被丟棄。閾值被突破。 |

*`N/A` 表示由於沒有任何請求成功完成，因此無法計算相關指標。*

## 3. 主要發現與結論

1.  **穩定運行區間:** 測試結果清晰地表明，目標服務在 **200 RPS** 及以下的負載區間內可以穩定運行。在此區間內，所有請求均成功，且回應時間（p95 < 200ms）保持在非常理想的範圍內。

2.  **明確的性能拐點 (200-250 RPS):** 系統的性能拐點出現在 200 RPS 到 250 RPS 之間。當負載從 200 RPS 增加到 250 RPS 時，系統性能發生了懸崖式下跌：
    *   **平均回應時間** 從 96 毫秒飆升至 5,625 毫秒（約 5.6 秒）。
    *   **失敗率** 從 0% 上升到 12.73%。
    *   k6 開始大量 **丟棄迭代**（dropped iterations），表明服務端已無法處理如此密集的請求。

3.  **持續崩潰區間 (250-350 RPS):** 在 250、300 及 350 RPS 的負載下，系統均表現出類似的崩潰行為：極高的平均回應時間（5-6秒）、超過 12% 的失敗率以及大量的迭代被丟棄。這證實了系統一旦超過性能拐{{}}點，其處理能力便會持續處於崩潰狀態。

4.  **結論:** 本系列測試確認了目標服務的有效性能上限在 **200 RPS** 左右。一旦超過此負載，服務的穩定性和可用性會迅速惡化。建議將 200 RPS 作為當前架構的性能基準線，並應集中資源分析和優化在 200-250 RPS 負載下導致性能瓶頸的具體原因，例如資料庫連接、第三方服務調用或特定的計算密集型操作。
