# å¾Œç«¯å–®å…ƒæ¸¬è©¦æ¡ˆä¾‹è©³ç´°æ¸…å–® (Backend Unit Test Cases Detail)

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-12-20  
**å°ˆæ¡ˆ**: ç·šä¸Šè®€æ›¸æœƒå¹³å° (BookClub)  
**æ¸¬è©¦æ¡†æ¶**: pytest, pytest-cov  
**ç¸½æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 103  
**æ¸¬è©¦é€šéç‡**: 100% (103/103) âœ…

---

## ğŸ“‹ ç›®éŒ„

1. [æ¨¡çµ„ 1: User Service æ¸¬è©¦](#æ¨¡çµ„-1-user-service-æ¸¬è©¦)
2. [æ¨¡çµ„ 2: User Model æ¸¬è©¦](#æ¨¡çµ„-2-user-model-æ¸¬è©¦)
3. [æ¨¡çµ„ 3: User Profile Service æ¸¬è©¦](#æ¨¡çµ„-3-user-profile-service-æ¸¬è©¦)
4. [æ¨¡çµ„ 4: Book Club Service æ¸¬è©¦](#æ¨¡çµ„-4-book-club-service-æ¸¬è©¦)
5. [æ¨¡çµ„ 5: Book Club List Service æ¸¬è©¦](#æ¨¡çµ„-5-book-club-list-service-æ¸¬è©¦)
6. [æ¨¡çµ„ 6: Event Service æ¸¬è©¦](#æ¨¡çµ„-6-event-service-æ¸¬è©¦)
7. [æ¨¡çµ„ 7: Event Participation æ¸¬è©¦](#æ¨¡çµ„-7-event-participation-æ¸¬è©¦)
8. [æ¨¡çµ„ 8: Event Update Delete æ¸¬è©¦](#æ¨¡çµ„-8-event-update-delete-æ¸¬è©¦)
9. [æ¨¡çµ„ 9: User Event Service æ¸¬è©¦](#æ¨¡çµ„-9-user-event-service-æ¸¬è©¦)
10. [æ¨¡çµ„ 10: Password Reset Service æ¸¬è©¦](#æ¨¡çµ„-10-password-reset-service-æ¸¬è©¦)
11. [æ¨¡çµ„ 11: Email Service æ¸¬è©¦](#æ¨¡çµ„-11-email-service-æ¸¬è©¦)
12. [æ¨¡çµ„ 12: Interest Tag Service æ¸¬è©¦](#æ¨¡çµ„-12-interest-tag-service-æ¸¬è©¦)
13. [æ¨¡çµ„ 13: Dashboard Service æ¸¬è©¦](#æ¨¡çµ„-13-dashboard-service-æ¸¬è©¦)
14. [æ¨¡çµ„ 14: Discussion Service æ¸¬è©¦](#æ¨¡çµ„-14-discussion-service-æ¸¬è©¦)
15. [æ¨¡çµ„ 15: Notification Service æ¸¬è©¦](#æ¨¡çµ„-15-notification-service-æ¸¬è©¦)
16. [æ¨¡çµ„ 16: Notifications API æ¸¬è©¦](#æ¨¡çµ„-16-notifications-api-æ¸¬è©¦)
17. [æ¨¡çµ„ 17: Avatar Upload æ¸¬è©¦](#æ¨¡çµ„-17-avatar-upload-æ¸¬è©¦)

---

## æ¨¡çµ„ 1: User Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_user_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 2

### TC_1.1: æ¸¬è©¦æœªé©—è­‰ Email çš„ç”¨æˆ¶ç„¡æ³•ç™»å…¥

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœªé©—è­‰ Email çš„ç”¨æˆ¶ç„¡æ³•ç™»å…¥
- **åŸå§‹å‡½å¼åç¨±**: `test_authenticate_unverified_user`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æœªé©—è­‰ç”¨æˆ¶ (email_verified=False)
  2. èª¿ç”¨ UserService.authenticate()
- **é æœŸçµæœ**: æ‹‹å‡º ValueErrorï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œè«‹å…ˆå®Œæˆ Email é©—è­‰ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_1.2: æ¸¬è©¦å·²é©—è­‰ Email çš„ç”¨æˆ¶å¯ä»¥æˆåŠŸç™»å…¥

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å·²é©—è­‰ Email çš„ç”¨æˆ¶å¯ä»¥æˆåŠŸç™»å…¥
- **åŸå§‹å‡½å¼åç¨±**: `test_authenticate_verified_user`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å·²é©—è­‰ç”¨æˆ¶ (email_verified=True)
  2. èª¿ç”¨ UserService.authenticate()
  3. ä½¿ç”¨æ­£ç¢ºå¯†ç¢¼
- **é æœŸçµæœ**: è¿”å›èªè­‰ç”¨æˆ¶ç‰©ä»¶ï¼Œemail ç›¸ç¬¦
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 2: User Model æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_user_model.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 4

### TC_2.1: æ¸¬è©¦æ–°ç”¨æˆ¶è‡ªå‹•è¨­å®šå»ºç«‹æ™‚é–“

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ–°ç”¨æˆ¶è‡ªå‹•è¨­å®šå»ºç«‹æ™‚é–“
- **åŸå§‹å‡½å¼åç¨±**: `test_user_created_at_auto_set`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ User ç‰©ä»¶
  2. å„²å­˜è‡³è³‡æ–™åº«
  3. æª¢æŸ¥ created_at æ¬„ä½
- **é æœŸçµæœ**: created_at ä¸ç‚º Noneï¼Œä¸”ç‚º datetime å‹åˆ¥
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_2.2: æ¸¬è©¦æ–°ç”¨æˆ¶è‡ªå‹•è¨­å®šæ›´æ–°æ™‚é–“

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ–°ç”¨æˆ¶è‡ªå‹•è¨­å®šæ›´æ–°æ™‚é–“
- **åŸå§‹å‡½å¼åç¨±**: `test_user_updated_at_auto_set`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ User ç‰©ä»¶
  2. å„²å­˜è‡³è³‡æ–™åº«
  3. æª¢æŸ¥ updated_at æ¬„ä½
- **é æœŸçµæœ**: updated_at ä¸ç‚º Noneï¼Œä¸”ç‚º datetime å‹åˆ¥
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_2.3: æ¸¬è©¦æ™‚é–“æˆ³è¨˜ç‚º UTC æ™‚é–“

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ™‚é–“æˆ³è¨˜ç‚º UTC æ™‚é–“
- **åŸå§‹å‡½å¼åç¨±**: `test_user_timestamps_are_utc`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä¸¦å„²å­˜ç”¨æˆ¶
  2. å–å¾—ç•¶å‰ UTC æ™‚é–“
  3. æ¯”è¼ƒæ™‚é–“å·®
- **é æœŸçµæœ**: æ™‚é–“å·®æ‡‰åœ¨ 60 ç§’å…§
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_2.4: æ¸¬è©¦æ™‚é–“æˆ³è¨˜æ¬„ä½ä¸å¯ç‚ºç©º

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ™‚é–“æˆ³è¨˜æ¬„ä½ä¸å¯ç‚ºç©º
- **åŸå§‹å‡½å¼åç¨±**: `test_user_timestamps_not_null`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä¸¦å„²å­˜ç”¨æˆ¶
  2. æª¢æŸ¥ created_at å’Œ updated_at
- **é æœŸçµæœ**: å…©æ¬„ä½çš†ä¸ç‚º None
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 3: User Profile Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_user_profile_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 6

### TC_3.1: æ¸¬è©¦æ›´æ–°å€‹äººæª”æ¡ˆ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ›´æ–°å€‹äººæª”æ¡ˆï¼ˆåç¨±å’Œç°¡ä»‹ï¼‰
- **åŸå§‹å‡½å¼åç¨±**: `test_update_profile`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ¸¬è©¦ç”¨æˆ¶
  2. èª¿ç”¨ update_profile() æ›´æ–°åç¨±å’Œç°¡ä»‹
  3. é©—è­‰æ›´æ–°çµæœ
- **é æœŸçµæœ**: display_name å’Œ bio å·²æ›´æ–°ç‚ºæ–°å€¼
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_3.2: æ¸¬è©¦ç‚ºç”¨æˆ¶æ–°å¢èˆˆè¶£æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç‚ºç”¨æˆ¶æ–°å¢èˆˆè¶£æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_add_interest_tag`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ¸¬è©¦ç”¨æˆ¶å’Œæ¨™ç±¤
  2. èª¿ç”¨ add_interest_tag()
  3. æª¢æŸ¥ç”¨æˆ¶çš„ interest_tags
- **é æœŸçµæœ**: æ¨™ç±¤å·²åŠ å…¥ç”¨æˆ¶çš„èˆˆè¶£æ¨™ç±¤åˆ—è¡¨
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_3.3: æ¸¬è©¦æ–°å¢é‡è¤‡æ¨™ç±¤æ™‚å¼•ç™¼éŒ¯èª¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ–°å¢é‡è¤‡æ¨™ç±¤æ™‚å¼•ç™¼éŒ¯èª¤
- **åŸå§‹å‡½å¼åç¨±**: `test_add_duplicate_interest_tag_raises_error`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç‚ºç”¨æˆ¶æ–°å¢æ¨™ç±¤
  2. å†æ¬¡æ–°å¢ç›¸åŒæ¨™ç±¤
  3. æ•ç²ç•°å¸¸
- **é æœŸçµæœ**: æ‹‹å‡º ValueErrorï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œå·²æ–°å¢éæ­¤æ¨™ç±¤ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_3.4: æ¸¬è©¦ç”¨æˆ¶æ¨™ç±¤é”åˆ°ä¸Šé™æ™‚å¼•ç™¼éŒ¯èª¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç”¨æˆ¶æ¨™ç±¤é”åˆ° 20 å€‹ä¸Šé™æ™‚å¼•ç™¼éŒ¯èª¤
- **åŸå§‹å‡½å¼åç¨±**: `test_add_interest_tag_limit_raises_error`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æ–°å¢ 20 å€‹æ¨™ç±¤
  2. å˜—è©¦æ–°å¢ç¬¬ 21 å€‹æ¨™ç±¤
  3. æ•ç²ç•°å¸¸
- **é æœŸçµæœ**: æ‹‹å‡º ValueErrorï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œèˆˆè¶£æ¨™ç±¤æ•¸é‡å·²é”ä¸Šé™ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_3.5: æ¸¬è©¦ç§»é™¤ç”¨æˆ¶çš„èˆˆè¶£æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç§»é™¤ç”¨æˆ¶çš„èˆˆè¶£æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_remove_interest_tag`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç‚ºç”¨æˆ¶æ–°å¢æ¨™ç±¤
  2. èª¿ç”¨ remove_interest_tag()
  3. é©—è­‰æ¨™ç±¤å·²ç§»é™¤
- **é æœŸçµæœ**: æ¨™ç±¤ä¸å†å­˜åœ¨æ–¼ç”¨æˆ¶çš„èˆˆè¶£æ¨™ç±¤åˆ—è¡¨
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_3.6: æ¸¬è©¦ç²å–ç”¨æˆ¶æª”æ¡ˆæ™‚æ­£ç¢ºè¼‰å…¥æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–ç”¨æˆ¶æª”æ¡ˆæ™‚èƒ½æ­£ç¢ºè¼‰å…¥é—œè¯çš„æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_profile`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç‚ºç”¨æˆ¶æ–°å¢æ¨™ç±¤
  2. èª¿ç”¨ get_user_profile()
  3. é©—è­‰æ¨™ç±¤è³‡æ–™
- **é æœŸçµæœ**: è¿”å›çš„ profile åŒ…å«æ­£ç¢ºçš„æ¨™ç±¤è³‡æ–™
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 4: Book Club Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_book_club_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 16

### TC_4.1: æ¸¬è©¦æˆåŠŸå»ºç«‹è®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸå»ºç«‹è®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_create_book_club_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ¸¬è©¦æ¨™ç±¤
  2. æº–å‚™ BookClubCreate è³‡æ–™
  3. èª¿ç”¨ create_book_club()
  4. é©—è­‰è®€æ›¸æœƒè³‡æ–™
- **é æœŸçµæœ**: è®€æ›¸æœƒå»ºç«‹æˆåŠŸï¼Œowner_id æ­£ç¢ºï¼Œmember_count=1ï¼Œæ¨™ç±¤æ•¸é‡æ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.2: æ¸¬è©¦ä½¿ç”¨ç„¡æ•ˆçš„æ¨™ç±¤ ID å»ºç«‹è®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ä½¿ç”¨ç„¡æ•ˆçš„æ¨™ç±¤ ID å»ºç«‹è®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_create_book_club_with_invalid_tag_ids`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æº–å‚™ä¸å­˜åœ¨çš„æ¨™ç±¤ ID (999, 1000)
  2. èª¿ç”¨ create_book_club()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œæ¨™ç±¤ ID ç„¡æ•ˆã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.3: æ¸¬è©¦è®€æ›¸æœƒåç¨±éé•·çš„é©—è­‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è®€æ›¸æœƒåç¨±éé•·çš„é©—è­‰
- **åŸå§‹å‡½å¼åç¨±**: `test_create_book_club_name_too_long`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 51 å­—å…ƒçš„åç¨±
  2. å»ºç«‹ BookClubCreate ç‰©ä»¶
  3. æ•ç² ValidationError
- **é æœŸçµæœ**: æ‹‹å‡ºé©—è­‰éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œat most 50 charactersã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.4: æ¸¬è©¦è®€æ›¸æœƒç°¡ä»‹éé•·çš„é©—è­‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è®€æ›¸æœƒç°¡ä»‹éé•·çš„é©—è­‰
- **åŸå§‹å‡½å¼åç¨±**: `test_create_book_club_description_too_long`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 501 å­—å…ƒçš„ç°¡ä»‹
  2. å»ºç«‹ BookClubCreate ç‰©ä»¶
  3. æ•ç² ValidationError
- **é æœŸçµæœ**: æ‹‹å‡ºé©—è­‰éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œat most 500 charactersã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.5: æ¸¬è©¦æœªé¸æ“‡æ¨™ç±¤çš„é©—è­‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœªé¸æ“‡æ¨™ç±¤çš„é©—è­‰
- **åŸå§‹å‡½å¼åç¨±**: `test_create_book_club_no_tags`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ç©ºçš„æ¨™ç±¤åˆ—è¡¨ tag_ids=[]
  2. å»ºç«‹ BookClubCreate ç‰©ä»¶
  3. æ•ç² ValidationError
- **é æœŸçµæœ**: æ‹‹å‡ºé©—è­‰éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œat least 1 itemã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.6: æ¸¬è©¦å–å¾—å¯ç”¨æ¨™ç±¤åˆ—è¡¨

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å–å¾—å¯ç”¨æ¨™ç±¤åˆ—è¡¨
- **åŸå§‹å‡½å¼åç¨±**: `test_get_available_tags`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å¤šå€‹æ¨™ç±¤ï¼ˆé è¨­å’Œè‡ªå®šç¾©ï¼‰
  2. èª¿ç”¨ get_available_tags()
  3. é©—è­‰è¿”å›è³‡æ–™
- **é æœŸçµæœ**: è¿”å›æ‰€æœ‰æ¨™ç±¤ï¼Œæ¯å€‹æ¨™ç±¤åŒ…å« id, name, is_predefined æ¬„ä½
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.7: æ¸¬è©¦å»ºç«‹ç§å¯†è®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å»ºç«‹ç§å¯†è®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_create_private_book_club`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. è¨­å®š visibility=PRIVATE
  2. èª¿ç”¨ create_book_club()
  3. é©—è­‰ visibility
- **é æœŸçµæœ**: è®€æ›¸æœƒçš„ visibility ç‚º PRIVATE
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.8: æ¸¬è©¦æˆåŠŸåŠ å…¥å…¬é–‹è®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸåŠ å…¥å…¬é–‹è®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_join_public_book_club_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å…¬é–‹è®€æ›¸æœƒ
  2. å¦ä¸€ç”¨æˆ¶èª¿ç”¨ join_book_club()
  3. é©—è­‰æˆå“¡è¨˜éŒ„
- **é æœŸçµæœ**: ç”¨æˆ¶æˆåŠŸåŠ å…¥ï¼Œrole ç‚º MEMBER
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.9: æ¸¬è©¦åŠ å…¥ç§å¯†è®€æ›¸æœƒæœƒå»ºç«‹ç”³è«‹

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åŠ å…¥ç§å¯†è®€æ›¸æœƒæœƒå»ºç«‹ç”³è«‹
- **åŸå§‹å‡½å¼åç¨±**: `test_join_private_book_club_creates_request`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ç§å¯†è®€æ›¸æœƒ
  2. å¦ä¸€ç”¨æˆ¶èª¿ç”¨ join_book_club()
  3. æª¢æŸ¥åŠ å…¥ç”³è«‹è¨˜éŒ„
- **é æœŸçµæœ**: å»ºç«‹ ClubJoinRequestï¼Œstatus ç‚º PENDING
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.10: æ¸¬è©¦é‡è¤‡ç”³è«‹åŠ å…¥ç§å¯†è®€æ›¸æœƒå¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é‡è¤‡ç”³è«‹åŠ å…¥ç§å¯†è®€æ›¸æœƒå¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_join_private_club_duplicate_request_fail`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹åŠ å…¥ç”³è«‹
  2. å†æ¬¡ç”³è«‹
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œå·²æäº¤éç”³è«‹ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.11: æ¸¬è©¦æˆåŠŸé€€å‡ºè®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸé€€å‡ºè®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_leave_book_club_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç”¨æˆ¶åŠ å…¥è®€æ›¸æœƒ
  2. èª¿ç”¨ leave_book_club()
  3. é©—è­‰æˆå“¡è¨˜éŒ„
- **é æœŸçµæœ**: æˆå“¡è¨˜éŒ„å·²åˆªé™¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.12: æ¸¬è©¦éæˆå“¡é€€å‡ºè®€æ›¸æœƒå¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éæˆå“¡é€€å‡ºè®€æ›¸æœƒå¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_leave_not_a_member_fail`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç”¨æˆ¶æœªåŠ å…¥è®€æ›¸æœƒ
  2. èª¿ç”¨ leave_book_club()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œä¸æ˜¯è®€æ›¸æœƒæˆå“¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.13: æ¸¬è©¦æ“æœ‰è€…ç„¡æ³•é€€å‡ºè®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ“æœ‰è€…ç„¡æ³•é€€å‡ºè®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_owner_leave_book_club_fail`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æ“æœ‰è€…èª¿ç”¨ leave_book_club()
  2. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œæ“æœ‰è€…ç„¡æ³•é€€å‡ºã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.14: æ¸¬è©¦æˆåŠŸç”³è«‹åŠ å…¥ç§å¯†è®€æ›¸æœƒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸç”³è«‹åŠ å…¥ç§å¯†è®€æ›¸æœƒ
- **åŸå§‹å‡½å¼åç¨±**: `test_request_to_join_private_club_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ç§å¯†è®€æ›¸æœƒ
  2. èª¿ç”¨ request_to_join()
  3. é©—è­‰ç”³è«‹è¨˜éŒ„
- **é æœŸçµæœ**: å»ºç«‹åŠ å…¥ç”³è«‹ï¼Œstatus ç‚º PENDING
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.15: æ¸¬è©¦ç”³è«‹åŠ å…¥å…¬é–‹è®€æ›¸æœƒå¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç”³è«‹åŠ å…¥å…¬é–‹è®€æ›¸æœƒå¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_request_to_join_public_club_fail`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å…¬é–‹è®€æ›¸æœƒ
  2. èª¿ç”¨ request_to_join()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œå…¬é–‹è®€æ›¸æœƒå¯ç›´æ¥åŠ å…¥ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_4.16: æ¸¬è©¦ç²å–è®€æ›¸æœƒæ™‚åŒ…å«æˆå“¡ç‹€æ…‹

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–è®€æ›¸æœƒæ™‚åŒ…å«æˆå“¡ç‹€æ…‹
- **åŸå§‹å‡½å¼åç¨±**: `test_get_book_club_by_id_with_membership_status`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒ
  2. èª¿ç”¨ get_book_club_by_id()
  3. é©—è­‰è¿”å›çš„æˆå“¡ç‹€æ…‹
- **é æœŸçµæœ**: è¿”å›è®€æ›¸æœƒè©³ç´°è³‡è¨Šï¼ŒåŒ…å«ç”¨æˆ¶çš„æˆå“¡ç‹€æ…‹
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 5: Book Club List Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_book_club_list_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 9

### TC_5.1: æ¸¬è©¦è¿”å›æ‰€æœ‰è®€æ›¸æœƒï¼ˆå…¬é–‹å’Œç§å¯†ï¼‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è¿”å›æ‰€æœ‰è®€æ›¸æœƒï¼ˆå…¬é–‹å’Œç§å¯†ï¼‰
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_returns_only_public_clubs`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å…¬é–‹å’Œç§å¯†è®€æ›¸æœƒ
  2. èª¿ç”¨ list_book_clubs()
  3. é©—è­‰è¿”å›æ•¸é‡
- **é æœŸçµæœ**: è¿”å› 2 å€‹è®€æ›¸æœƒï¼ˆå…¬é–‹+ç§å¯†ï¼‰
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.2: æ¸¬è©¦é—œéµå­—æœå°‹åŠŸèƒ½

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é—œéµå­—æœå°‹åŠŸèƒ½
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_keyword_search`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å¤šå€‹è®€æ›¸æœƒ
  2. ä½¿ç”¨é—œéµå­—ã€ŒPythonã€æœå°‹
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›åç¨±æˆ–æè¿°åŒ…å«ã€ŒPythonã€çš„è®€æ›¸æœƒ
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.3: æ¸¬è©¦æ¨™ç±¤ç¯©é¸åŠŸèƒ½

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ¨™ç±¤ç¯©é¸åŠŸèƒ½
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_tag_filter`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒä¸¦é—œè¯æ¨™ç±¤
  2. ä½¿ç”¨ tag_ids ç¯©é¸
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›åŒ…å«æŒ‡å®šæ¨™ç±¤çš„è®€æ›¸æœƒ
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.4: æ¸¬è©¦åˆ†é åŠŸèƒ½

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åˆ†é åŠŸèƒ½
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_pagination`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 25 å€‹è®€æ›¸æœƒ
  2. è¨­å®š page_size=10
  3. å–å¾—ç¬¬ 1 é å’Œç¬¬ 2 é 
  4. é©—è­‰åˆ†é è³‡è¨Š
- **é æœŸçµæœ**: ç¬¬ 1 é  10 ç­†ï¼Œtotal_pages=3ï¼Œhas_next=True
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.5: æ¸¬è©¦æˆå“¡æ•¸è¨ˆç®—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆå“¡æ•¸è¨ˆç®—
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_member_count`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒ
  2. æ–°å¢ 2 å€‹æˆå“¡
  3. èª¿ç”¨ list_book_clubs()
  4. é©—è­‰ member_count
- **é æœŸçµæœ**: member_count = 2
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.6: æ¸¬è©¦æˆåŠŸç²å–è®€æ›¸æœƒè©³ç´°è³‡è¨Š

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸç²å–è®€æ›¸æœƒè©³ç´°è³‡è¨Š
- **åŸå§‹å‡½å¼åç¨±**: `test_get_book_club_by_id_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒ
  2. èª¿ç”¨ get_book_club_by_id()
  3. é©—è­‰è¿”å›è³‡æ–™
- **é æœŸçµæœ**: è¿”å›å®Œæ•´çš„è®€æ›¸æœƒè³‡è¨Šï¼ŒåŒ…å« owner å’Œ member_count
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.7: æ¸¬è©¦è®€æ›¸æœƒä¸å­˜åœ¨æ™‚æ‹‹å‡º 404 éŒ¯èª¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è®€æ›¸æœƒä¸å­˜åœ¨æ™‚æ‹‹å‡º 404 éŒ¯èª¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_book_club_by_id_not_found`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ä¸å­˜åœ¨çš„ ID (999)
  2. èª¿ç”¨ get_book_club_by_id()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 404 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œä¸å­˜åœ¨ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.8: æ¸¬è©¦è¿”å›å®Œæ•´è³‡æ–™åŒ…å«æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è¿”å›å®Œæ•´è³‡æ–™åŒ…å«æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_book_club_by_id_includes_tags`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒä¸¦é—œè¯æ¨™ç±¤
  2. èª¿ç”¨ get_book_club_by_id()
  3. é©—è­‰æ¨™ç±¤è³‡æ–™
- **é æœŸçµæœ**: è¿”å›çš„è®€æ›¸æœƒåŒ…å«å®Œæ•´çš„æ¨™ç±¤åˆ—è¡¨
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_5.9: æ¸¬è©¦é è¨­æ’åºï¼ˆä¾å»ºç«‹æ™‚é–“é™åºï¼‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é è¨­æ’åºï¼ˆä¾å»ºç«‹æ™‚é–“é™åºï¼‰
- **åŸå§‹å‡½å¼åç¨±**: `test_list_book_clubs_default_ordering`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹å¤šå€‹è®€æ›¸æœƒ
  2. èª¿ç”¨ list_book_clubs()
  3. é©—è­‰æ’åº
- **é æœŸçµæœ**: æœ€æ–°å»ºç«‹çš„è®€æ›¸æœƒæ’åœ¨æœ€å‰é¢
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 6: Event Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_event_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 13

### TC_6.1: æ¸¬è©¦æœªä¾†æ™‚é–“é©—è­‰é€šé

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœªä¾†æ™‚é–“é©—è­‰é€šé
- **åŸå§‹å‡½å¼åç¨±**: `test_future_datetime_valid`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æœªä¾†æ™‚é–“ (ç•¶å‰æ™‚é–“ + 1 å¤©)
  2. èª¿ç”¨ validate_event_datetime()
  3. é©—è­‰ç„¡ç•°å¸¸
- **é æœŸçµæœ**: å‡½æ•¸æ­£å¸¸åŸ·è¡Œï¼Œä¸æ‹‹å‡ºç•°å¸¸
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.2: æ¸¬è©¦éå»æ™‚é–“é©—è­‰å¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éå»æ™‚é–“é©—è­‰å¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_past_datetime_invalid`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹éå»æ™‚é–“ (ç•¶å‰æ™‚é–“ - 1 å¤©)
  2. èª¿ç”¨ validate_event_datetime()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæœªä¾†æ™‚é–“ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.3: æ¸¬è©¦ç•¶å‰æ™‚é–“é©—è­‰å¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç•¶å‰æ™‚é–“é©—è­‰å¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_current_datetime_invalid`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ç•¶å‰æ™‚é–“
  2. èª¿ç”¨ validate_event_datetime()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.4: æ¸¬è©¦æœ‰æ•ˆçš„ Google Meet URL

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœ‰æ•ˆçš„ Google Meet URL
- **åŸå§‹å‡½å¼åç¨±**: `test_valid_https_google_meet`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ HTTPS Google Meet URL
  2. èª¿ç”¨ validate_meeting_url()
  3. é©—è­‰ç„¡ç•°å¸¸
- **é æœŸçµæœ**: å‡½æ•¸æ­£å¸¸åŸ·è¡Œï¼Œä¸æ‹‹å‡ºç•°å¸¸
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.5: æ¸¬è©¦æœ‰æ•ˆçš„ Zoom URL

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœ‰æ•ˆçš„ Zoom URL
- **åŸå§‹å‡½å¼åç¨±**: `test_valid_https_zoom`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ HTTPS Zoom URL
  2. èª¿ç”¨ validate_meeting_url()
  3. é©—è­‰ç„¡ç•°å¸¸
- **é æœŸçµæœ**: å‡½æ•¸æ­£å¸¸åŸ·è¡Œï¼Œä¸æ‹‹å‡ºç•°å¸¸
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.6: æ¸¬è©¦æœ‰æ•ˆçš„ Teams URL

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœ‰æ•ˆçš„ Teams URL
- **åŸå§‹å‡½å¼åç¨±**: `test_valid_https_teams`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ HTTPS Teams URL
  2. èª¿ç”¨ validate_meeting_url()
  3. é©—è­‰ç„¡ç•°å¸¸
- **é æœŸçµæœ**: å‡½æ•¸æ­£å¸¸åŸ·è¡Œï¼Œä¸æ‹‹å‡ºç•°å¸¸
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.7: æ¸¬è©¦ HTTP URL é©—è­‰å¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ HTTP URL é©—è­‰å¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_invalid_http_url`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ HTTP URL
  2. èª¿ç”¨ validate_meeting_url()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€ŒHTTPSã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.8: æ¸¬è©¦ç„¡æ•ˆ URL æ ¼å¼é©—è­‰å¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç„¡æ•ˆ URL æ ¼å¼é©—è­‰å¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_invalid_url_format`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ç„¡æ•ˆ URL (not-a-url)
  2. èª¿ç”¨ validate_meeting_url()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæ ¼å¼ç„¡æ•ˆã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.9: æ¸¬è©¦ç®¡ç†å“¡æˆåŠŸå»ºç«‹æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç®¡ç†å“¡æˆåŠŸå»ºç«‹æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_create_event_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒå’Œç®¡ç†å“¡ç”¨æˆ¶
  2. æº–å‚™ EventCreate è³‡æ–™
  3. èª¿ç”¨ create_event()
  4. é©—è­‰æ´»å‹•è³‡æ–™
- **é æœŸçµæœ**: æ´»å‹•å»ºç«‹æˆåŠŸï¼Œorganizer_id æ­£ç¢ºï¼Œstatus ç‚º DRAFT
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.10: æ¸¬è©¦éæˆå“¡ç„¡æ³•å»ºç«‹æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éæˆå“¡ç„¡æ³•å»ºç«‹æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_create_event_non_member_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨éè®€æ›¸æœƒæˆå“¡
  2. å˜—è©¦å»ºç«‹æ´»å‹•
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 403 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæˆå“¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.11: æ¸¬è©¦æ™®é€šæˆå“¡ç„¡æ³•å»ºç«‹æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ™®é€šæˆå“¡ç„¡æ³•å»ºç«‹æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_create_event_regular_member_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ™®é€šæˆå“¡ (role=MEMBER)
  2. å˜—è©¦å»ºç«‹æ´»å‹•
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 403 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œç®¡ç†å“¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.12: æ¸¬è©¦éå»æ™‚é–“ç„¡æ³•å»ºç«‹æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éå»æ™‚é–“ç„¡æ³•å»ºç«‹æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_create_event_past_datetime_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨éå»æ™‚é–“
  2. å˜—è©¦å»ºç«‹æ´»å‹•
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæœªä¾†æ™‚é–“ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_6.13: æ¸¬è©¦ç„¡æ•ˆ URL ç„¡æ³•å»ºç«‹æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç„¡æ•ˆ URL ç„¡æ³•å»ºç«‹æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_create_event_invalid_url_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ HTTP URL
  2. å˜—è©¦å»ºç«‹æ´»å‹•
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 7: Event Participation æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_event_participation.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 7

### TC_7.1: æ¸¬è©¦æˆåŠŸå ±åæ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸå ±åæ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_join_event_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒæˆå“¡å’Œæ´»å‹•
  2. èª¿ç”¨ join_event()
  3. é©—è­‰åƒèˆ‡è¨˜éŒ„
- **é æœŸçµæœ**: is_participating=Trueï¼Œcurrent_participants=1ï¼Œè³‡æ–™åº«æœ‰ REGISTERED è¨˜éŒ„
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.2: æ¸¬è©¦é¡æ»¿æ™‚ç„¡æ³•å ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é¡æ»¿æ™‚ç„¡æ³•å ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_join_event_full_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. è¨­å®š max_participants=2
  2. 2 ä½æˆå“¡å ±å
  3. ç¬¬ 3 ä½å˜—è©¦å ±å
  4. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œäººæ•¸å·²æ»¿ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.3: æ¸¬è©¦æ´»å‹•å·²çµæŸç„¡æ³•å ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ´»å‹•å·²çµæŸç„¡æ³•å ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_join_event_ended_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹éå»çš„æ´»å‹•
  2. å˜—è©¦å ±å
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œå·²çµæŸã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.4: æ¸¬è©¦é‡è¤‡å ±åå¤±æ•—

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é‡è¤‡å ±åå¤±æ•—
- **åŸå§‹å‡½å¼åç¨±**: `test_join_event_already_joined_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æˆåŠŸå ±åæ´»å‹•
  2. å†æ¬¡å ±å
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œå·²ç¶“åƒèˆ‡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.5: æ¸¬è©¦éè®€æ›¸æœƒæˆå“¡ç„¡æ³•å ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éè®€æ›¸æœƒæˆå“¡ç„¡æ³•å ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_join_event_non_member_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨éè®€æ›¸æœƒæˆå“¡
  2. å˜—è©¦å ±åæ´»å‹•
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 403 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œä¸æ˜¯æ­¤è®€æ›¸æœƒæˆå“¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.6: æ¸¬è©¦æˆåŠŸå–æ¶ˆå ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸå–æ¶ˆå ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_leave_event_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å…ˆå ±åæ´»å‹•
  2. èª¿ç”¨ leave_event()
  3. é©—è­‰åƒèˆ‡è¨˜éŒ„
- **é æœŸçµæœ**: is_participating=Falseï¼Œcurrent_participants=0ï¼Œè³‡æ–™åº«è¨˜éŒ„å·²åˆªé™¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_7.7: æ¸¬è©¦æœªå ±åç„¡æ³•å–æ¶ˆ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æœªå ±åç„¡æ³•å–æ¶ˆ
- **åŸå§‹å‡½å¼åç¨±**: `test_leave_event_not_joined_fails`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æœªå ±åæ´»å‹•
  2. å˜—è©¦å–æ¶ˆå ±å
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œå°šæœªåƒèˆ‡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 8: Event Update Delete æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_event_update_delete.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 9

### TC_8.1: æ¸¬è©¦æˆåŠŸæ›´æ–°æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸæ›´æ–°æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_update_event_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. æº–å‚™æ›´æ–°è³‡æ–™
  3. èª¿ç”¨ PUT /api/v1/clubs/{id}/events/{id}
  4. é©—è­‰æ›´æ–°çµæœ
- **é æœŸçµæœ**: è¿”å› 200ï¼Œæ¨™é¡Œã€æè¿°ã€URLã€äººæ•¸ä¸Šé™å·²æ›´æ–°
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.2: æ¸¬è©¦éƒ¨åˆ†æ›´æ–°æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éƒ¨åˆ†æ›´æ–°æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_update_event_partial_update`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. åªæ›´æ–°æ¨™é¡Œ
  3. èª¿ç”¨ PUT ç«¯é»
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: æ¨™é¡Œå·²æ›´æ–°ï¼Œå…¶ä»–æ¬„ä½ä¿æŒåŸå€¼
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.3: æ¸¬è©¦éç™¼èµ·äººä¸”éç®¡ç†å“¡ç„¡æ³•æ›´æ–°æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éç™¼èµ·äººä¸”éç®¡ç†å“¡ç„¡æ³•æ›´æ–°æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_update_event_not_organizer`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. ä½¿ç”¨æ™®é€šæˆå“¡ Token
  3. å˜—è©¦æ›´æ–°
  4. æ•ç²éŒ¯èª¤
- **é æœŸçµæœ**: è¿”å› 403ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œç®¡ç†å“¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.4: æ¸¬è©¦è®€æ›¸æœƒç®¡ç†å“¡å¯ä»¥æ›´æ–°æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è®€æ›¸æœƒç®¡ç†å“¡å¯ä»¥æ›´æ–°æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_update_event_by_admin`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. ä½¿ç”¨ç®¡ç†å“¡ Token
  3. æ›´æ–°æ´»å‹•
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: è¿”å› 200ï¼Œæ¨™é¡Œå·²æ›´æ–°
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.5: æ¸¬è©¦äººæ•¸ä¸Šé™ä¸èƒ½ä½æ–¼ç•¶å‰åƒèˆ‡äººæ•¸

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦äººæ•¸ä¸Šé™ä¸èƒ½ä½æ–¼ç•¶å‰åƒèˆ‡äººæ•¸
- **åŸå§‹å‡½å¼åç¨±**: `test_update_event_max_participants_below_current`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•ä¸¦æœ‰åƒèˆ‡è€…
  2. å˜—è©¦å°‡ä¸Šé™è¨­ç‚ºä½æ–¼ç•¶å‰äººæ•¸
  3. æ•ç²éŒ¯èª¤
- **é æœŸçµæœ**: è¿”å› 400ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œäººæ•¸ä¸Šé™ä¸èƒ½ä½æ–¼ç•¶å‰åƒèˆ‡äººæ•¸ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.6: æ¸¬è©¦æˆåŠŸåˆªé™¤æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸåˆªé™¤æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_delete_event_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. èª¿ç”¨ DELETE /api/v1/clubs/{id}/events/{id}
  3. é©—è­‰åˆªé™¤çµæœ
- **é æœŸçµæœ**: è¿”å› 204ï¼Œè³‡æ–™åº«è¨˜éŒ„å·²åˆªé™¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.7: æ¸¬è©¦ç®¡ç†å“¡å¯ä»¥åˆªé™¤æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç®¡ç†å“¡å¯ä»¥åˆªé™¤æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_delete_event_by_admin`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. ä½¿ç”¨ç®¡ç†å“¡ Token
  3. åˆªé™¤æ´»å‹•
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: è¿”å› 204ï¼Œæ´»å‹•å·²åˆªé™¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.8: æ¸¬è©¦éæˆæ¬Šç”¨æˆ¶ç„¡æ³•åˆªé™¤æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦éæˆæ¬Šç”¨æˆ¶ç„¡æ³•åˆªé™¤æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_delete_event_not_authorized`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•
  2. ä½¿ç”¨æ™®é€šæˆå“¡ Token
  3. å˜—è©¦åˆªé™¤
  4. æ•ç²éŒ¯èª¤
- **é æœŸçµæœ**: è¿”å› 403ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæ¬Šé™ä¸è¶³ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_8.9: æ¸¬è©¦åˆªé™¤å·²çµæŸçš„æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åˆªé™¤å·²çµæŸçš„æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_delete_past_event`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹éå»çš„æ´»å‹•
  2. èª¿ç”¨ DELETE ç«¯é»
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: è¿”å› 204ï¼Œéå»çš„æ´»å‹•å¯ä»¥è¢«åˆªé™¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 9: User Event Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_user_event_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 6

### TC_9.1: æ¸¬è©¦åŸºæœ¬æŸ¥è©¢ï¼šæ‡‰åªè¿”å›å·²åŠ å…¥è®€æ›¸æœƒçš„æ´»å‹•

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åŸºæœ¬æŸ¥è©¢ï¼šæ‡‰åªè¿”å›å·²åŠ å…¥è®€æ›¸æœƒçš„æ´»å‹•
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_basic`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 2 å€‹è®€æ›¸æœƒå’Œæ´»å‹•
  2. ç”¨æˆ¶åªåŠ å…¥è®€æ›¸æœƒ 1
  3. èª¿ç”¨ get_user_club_events()
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›è®€æ›¸æœƒ 1 çš„æ´»å‹•ï¼Œtotal_items=2
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_9.2: æ¸¬è©¦ç‹€æ…‹ç¯©é¸

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç‹€æ…‹ç¯©é¸
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_filter_status`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ PUBLISHED å’Œ CANCELLED æ´»å‹•
  2. ä½¿ç”¨ status=PUBLISHED ç¯©é¸
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å› PUBLISHED ç‹€æ…‹çš„æ´»å‹•
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_9.3: æ¸¬è©¦åƒèˆ‡ç‹€æ…‹ç¯©é¸ï¼šå·²å ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åƒèˆ‡ç‹€æ…‹ç¯©é¸ï¼šå·²å ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_filter_participation_registered`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç”¨æˆ¶å ±åæ´»å‹• 1
  2. ä½¿ç”¨ participation=registered ç¯©é¸
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›å·²å ±åçš„æ´»å‹•ï¼Œis_registered=True
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_9.4: æ¸¬è©¦åƒèˆ‡ç‹€æ…‹ç¯©é¸ï¼šæœªå ±å

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åƒèˆ‡ç‹€æ…‹ç¯©é¸ï¼šæœªå ±å
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_filter_participation_not_registered`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç”¨æˆ¶å ±åæ´»å‹• 1
  2. ä½¿ç”¨ participation=not_registered ç¯©é¸
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›æœªå ±åçš„æ´»å‹•ï¼Œis_registered=False
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_9.5: æ¸¬è©¦è¿”å›æ¬„ä½çš„æ­£ç¢ºæ€§

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦è¿”å›æ¬„ä½çš„æ­£ç¢ºæ€§
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_check_fields`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ´»å‹•ä¸¦å ±å
  2. æŸ¥è©¢æ´»å‹•
  3. é©—è­‰æ¬„ä½
- **é æœŸçµæœ**: club_name æ­£ç¢ºï¼Œcurrent_participants=1ï¼Œis_organizer=True
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_9.6: æ¸¬è©¦åˆ†é 

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åˆ†é 
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_club_events_pagination`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 2 å€‹æ´»å‹•
  2. è¨­å®š page_size=1
  3. å–å¾—ç¬¬ 1 é å’Œç¬¬ 2 é 
  4. é©—è­‰åˆ†é è³‡è¨Š
- **é æœŸçµæœ**: ç¬¬ 1 é  1 ç­†ï¼Œtotal_pages=2ï¼Œhas_next=True
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 10: Password Reset Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_password_reset_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 12

### TC_10.1: æ¸¬è©¦ Token ç”Ÿæˆ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ Token ç”Ÿæˆ
- **åŸå§‹å‡½å¼åç¨±**: `test_generate_reset_token`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. èª¿ç”¨ generate_reset_token()
  2. ç”Ÿæˆç¬¬äºŒå€‹ token
  3. æ¯”è¼ƒå…©å€‹ token
- **é æœŸçµæœ**: token ä¸ç‚º Noneï¼Œé•·åº¦ > 20ï¼Œå…©å€‹ token ä¸åŒ
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.2: æ¸¬è©¦æˆåŠŸå‰µå»ºé‡ç½® Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸå‰µå»ºé‡ç½® Token
- **åŸå§‹å‡½å¼åç¨±**: `test_create_reset_token_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. èª¿ç”¨ create_reset_token()
  2. æŸ¥è©¢è³‡æ–™åº«è¨˜éŒ„
  3. é©—è­‰è³‡æ–™
- **é æœŸçµæœ**: è³‡æ–™åº«æœ‰è¨˜éŒ„ï¼Œuser_id æ­£ç¢ºï¼Œused=Falseï¼Œexpires_at åœ¨æœªä¾†
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.3: æ¸¬è©¦é€Ÿç‡é™åˆ¶ï¼ˆæ¯å°æ™‚æœ€å¤š 3 æ¬¡ï¼‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é€Ÿç‡é™åˆ¶ï¼ˆæ¯å°æ™‚æœ€å¤š 3 æ¬¡ï¼‰
- **åŸå§‹å‡½å¼åç¨±**: `test_create_reset_token_rate_limit`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º 3 å€‹ token
  2. å˜—è©¦å‰µå»ºç¬¬ 4 å€‹
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 429 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œå·²è«‹æ±‚éå¤šæ¬¡ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.4: æ¸¬è©¦é©—è­‰æœ‰æ•ˆçš„ Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é©—è­‰æœ‰æ•ˆçš„ Token
- **åŸå§‹å‡½å¼åç¨±**: `test_verify_reset_token_valid`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º token
  2. èª¿ç”¨ verify_reset_token()
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: valid=Trueï¼Œemail æ­£ç¢ºï¼Œreset_token ä¸ç‚º None
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.5: æ¸¬è©¦é©—è­‰ç„¡æ•ˆçš„ Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é©—è­‰ç„¡æ•ˆçš„ Token
- **åŸå§‹å‡½å¼åç¨±**: `test_verify_reset_token_invalid`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ä¸å­˜åœ¨çš„ token
  2. èª¿ç”¨ verify_reset_token()
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: valid=Falseï¼Œemail=Noneï¼Œreset_token=None
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.6: æ¸¬è©¦é©—è­‰éæœŸçš„ Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é©—è­‰éæœŸçš„ Token
- **åŸå§‹å‡½å¼åç¨±**: `test_verify_reset_token_expired`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºéæœŸçš„ token (expires_at åœ¨éå»)
  2. èª¿ç”¨ verify_reset_token()
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: valid=Falseï¼Œemail=None
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.7: æ¸¬è©¦é©—è­‰å·²ä½¿ç”¨çš„ Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é©—è­‰å·²ä½¿ç”¨çš„ Token
- **åŸå§‹å‡½å¼åç¨±**: `test_verify_reset_token_already_used`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º token
  2. æ¨™è¨˜ç‚ºå·²ä½¿ç”¨ (used=True)
  3. èª¿ç”¨ verify_reset_token()
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: valid=Falseï¼Œemail=None
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.8: æ¸¬è©¦æˆåŠŸé‡ç½®å¯†ç¢¼

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸé‡ç½®å¯†ç¢¼
- **åŸå§‹å‡½å¼åç¨±**: `test_reset_password_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º token
  2. èª¿ç”¨ reset_password()
  3. é©—è­‰çµæœ
  4. ä½¿ç”¨æ–°å¯†ç¢¼ç™»å…¥
- **é æœŸçµæœ**: å¯†ç¢¼å·²æ›´æ–°ï¼Œtoken æ¨™è¨˜ç‚º used=Trueï¼Œå¯ç”¨æ–°å¯†ç¢¼ç™»å…¥
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.9: æ¸¬è©¦ä½¿ç”¨ç„¡æ•ˆ Token é‡ç½®å¯†ç¢¼

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ä½¿ç”¨ç„¡æ•ˆ Token é‡ç½®å¯†ç¢¼
- **åŸå§‹å‡½å¼åç¨±**: `test_reset_password_invalid_token`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ä½¿ç”¨ä¸å­˜åœ¨çš„ token
  2. èª¿ç”¨ reset_password()
  3. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œç„¡æ•ˆçš„é‡ç½®é€£çµã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.10: æ¸¬è©¦å¯†ç¢¼å¤ªçŸ­

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å¯†ç¢¼å¤ªçŸ­
- **åŸå§‹å‡½å¼åç¨±**: `test_reset_password_too_short`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º token
  2. ä½¿ç”¨çŸ­å¯†ç¢¼ (short)
  3. èª¿ç”¨ reset_password()
  4. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œå¯†ç¢¼é•·åº¦è‡³å°‘ 8 å€‹å­—å…ƒã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.11: æ¸¬è©¦æ–°å¯†ç¢¼èˆ‡èˆŠå¯†ç¢¼ç›¸åŒ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ–°å¯†ç¢¼èˆ‡èˆŠå¯†ç¢¼ç›¸åŒ
- **åŸå§‹å‡½å¼åç¨±**: `test_reset_password_same_as_old`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º token
  2. ä½¿ç”¨èˆŠå¯†ç¢¼ä½œç‚ºæ–°å¯†ç¢¼
  3. èª¿ç”¨ reset_password()
  4. æ•ç² HTTPException
- **é æœŸçµæœ**: æ‹‹å‡º 400 éŒ¯èª¤ï¼ŒéŒ¯èª¤è¨Šæ¯åŒ…å«ã€Œæ–°å¯†ç¢¼ä¸èƒ½èˆ‡èˆŠå¯†ç¢¼ç›¸åŒã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_10.12: æ¸¬è©¦æ¸…ç†éæœŸçš„ Tokens

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ¸…ç†éæœŸçš„ Tokens
- **åŸå§‹å‡½å¼åç¨±**: `test_cleanup_expired_tokens`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º 1 å€‹æœ‰æ•ˆ token å’Œ 2 å€‹éæœŸ token
  2. èª¿ç”¨ cleanup_expired_tokens()
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: deleted_count=2ï¼Œè³‡æ–™åº«åªå‰© 1 å€‹æœ‰æ•ˆ token
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 11: Email Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_email_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 2

### TC_11.1: æ¸¬è©¦æˆåŠŸç‚ºç”¨æˆ¶ç”¢ç”Ÿ Email é©—è­‰ Token

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸç‚ºç”¨æˆ¶ç”¢ç”Ÿ Email é©—è­‰ Token
- **åŸå§‹å‡½å¼åç¨±**: `test_generate_verification_token`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹æ¸¬è©¦ç”¨æˆ¶
  2. èª¿ç”¨ generate_verification_token()
  3. é©—è­‰ token å’ŒéæœŸæ™‚é–“
- **é æœŸçµæœ**: token ä¸ç‚º Noneï¼Œexpires_at åœ¨æœªä¾†ç´„ 24 å°æ™‚ï¼Œå…è¨± 1 åˆ†é˜èª¤å·®
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_11.2: æ¸¬è©¦ç™¼é€é©—è­‰éƒµä»¶åŠŸèƒ½æ­£å¸¸å‘¼å« SendGrid API

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç™¼é€é©—è­‰éƒµä»¶åŠŸèƒ½æ­£å¸¸å‘¼å« SendGrid API
- **åŸå§‹å‡½å¼åç¨±**: `test_send_verification_email`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. Mock SendGrid API
  2. èª¿ç”¨ send_verification_email()
  3. é©—è­‰ API èª¿ç”¨å’Œéƒµä»¶å…§å®¹
- **é æœŸçµæœ**: SendGridAPIClient è¢«èª¿ç”¨ï¼Œéƒµä»¶åŒ…å«æ­£ç¢ºçš„ to_emailã€template_idã€dynamic_template_data
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 12: Interest Tag Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_interest_tag_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 6

### TC_12.1: æ¸¬è©¦æˆåŠŸå‰µå»ºè‡ªå®šç¾©æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸå‰µå»ºè‡ªå®šç¾©æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_create_custom_tag`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. èª¿ç”¨ create_custom_tag()
  2. é©—è­‰æ¨™ç±¤è³‡æ–™
  3. æª¢æŸ¥è³‡æ–™åº«
- **é æœŸçµæœ**: tag.name æ­£ç¢ºï¼Œis_predefined=Falseï¼Œè³‡æ–™åº«æœ‰è¨˜éŒ„
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_12.2: æ¸¬è©¦å‰µå»ºé‡è¤‡æ¨™ç±¤æ™‚æ‡‰å¼•ç™¼éŒ¯èª¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å‰µå»ºé‡è¤‡æ¨™ç±¤æ™‚æ‡‰å¼•ç™¼éŒ¯èª¤
- **åŸå§‹å‡½å¼åç¨±**: `test_create_duplicate_tag_raises_error`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºæ¨™ç±¤
  2. å†æ¬¡å‰µå»ºç›¸åŒåç¨±ï¼ˆä¸å€åˆ†å¤§å°å¯«ï¼‰
  3. æ•ç² ValueError
- **é æœŸçµæœ**: æ‹‹å‡º ValueErrorï¼ŒéŒ¯èª¤è¨Šæ¯ã€Œæ¨™ç±¤ '{name}' å·²å­˜åœ¨ã€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_12.3: æ¸¬è©¦ç²å–æ‰€æœ‰æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–æ‰€æœ‰æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_all_tags`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. æ¸…ç©ºä¸¦å‰µå»º 2 å€‹æ¨™ç±¤
  2. èª¿ç”¨ get_all_tags()
  3. é©—è­‰æ•¸é‡
- **é æœŸçµæœ**: è¿”å› 2 å€‹æ¨™ç±¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_12.4: æ¸¬è©¦åªç²å–é è¨­æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦åªç²å–é è¨­æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_all_tags_predefined_only`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºé è¨­å’Œè‡ªå®šç¾©æ¨™ç±¤
  2. èª¿ç”¨ get_all_tags(predefined_only=True)
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å› is_predefined=True çš„æ¨™ç±¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_12.5: æ¸¬è©¦ä¾åç¨±æœå°‹æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ä¾åç¨±æœå°‹æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_all_tags_with_search`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºå¤šå€‹æ¨™ç±¤
  2. ä½¿ç”¨ search="searchable" æœå°‹
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å›åç¨±åŒ…å«æœå°‹é—œéµå­—çš„æ¨™ç±¤
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_12.6: æ¸¬è©¦ä¾ ID ç²å–æ¨™ç±¤

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ä¾ ID ç²å–æ¨™ç±¤
- **åŸå§‹å‡½å¼åç¨±**: `test_get_tag_by_id`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºæ¨™ç±¤
  2. èª¿ç”¨ get_tag_by_id()
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: è¿”å›çš„æ¨™ç±¤ ID æ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 13: Dashboard Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_dashboard_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 3

### TC_13.1: æ¸¬è©¦ç²å–å„€è¡¨æ¿è³‡æ–™è¿”å›é è¨­å€¼ï¼ˆEpic 1 éšæ®µï¼‰

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–å„€è¡¨æ¿è³‡æ–™è¿”å›é è¨­å€¼ï¼ˆEpic 1 éšæ®µï¼‰
- **åŸå§‹å‡½å¼åç¨±**: `test_get_user_dashboard_returns_default_values`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. èª¿ç”¨ get_user_dashboard()
  2. é©—è­‰è¿”å›å‹åˆ¥
  3. æª¢æŸ¥çµ±è¨ˆè³‡æ–™å’Œåˆ—è¡¨
- **é æœŸçµæœ**: è¿”å› DashboardDataï¼Œstats æ‰€æœ‰æ•¸å€¼ç‚º 0ï¼Œclubs å’Œ recent_activities ç‚ºç©ºé™£åˆ—
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_13.2: æ¸¬è©¦å„€è¡¨æ¿è³‡æ–™çµæ§‹ç¬¦åˆ Schema å®šç¾©

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å„€è¡¨æ¿è³‡æ–™çµæ§‹ç¬¦åˆ Schema å®šç¾©
- **åŸå§‹å‡½å¼åç¨±**: `test_dashboard_data_structure`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º DashboardData ç‰©ä»¶
  2. é©—è­‰å±¬æ€§å­˜åœ¨
  3. æª¢æŸ¥ stats çµæ§‹
- **é æœŸçµæœ**: æœ‰ statsã€clubsã€recent_activities å±¬æ€§ï¼Œstats æœ‰æ‰€æœ‰å¿…è¦æ¬„ä½
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_13.3: æ¸¬è©¦çµ±è¨ˆè³‡æ–™ camelCase Alias è½‰æ›

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦çµ±è¨ˆè³‡æ–™ camelCase Alias è½‰æ›
- **åŸå§‹å‡½å¼åç¨±**: `test_dashboard_stats_camelcase_alias`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»º DashboardStats
  2. ä½¿ç”¨ model_dump(by_alias=True)
  3. é©—è­‰æ¬„ä½åç¨±å’Œå€¼
- **é æœŸçµæœ**: åŒ…å« clubsCountã€booksReadã€discussionsCountï¼Œå€¼æ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 14: Discussion Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_discussion_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 3

### TC_14.1: æ¸¬è©¦å»ºç«‹è¨è«–ä¸»é¡Œ

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å»ºç«‹è¨è«–ä¸»é¡Œ
- **åŸå§‹å‡½å¼åç¨±**: `test_create_topic`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒ
  2. èª¿ç”¨ create_topic()
  3. é©—è­‰ä¸»é¡Œè³‡æ–™
- **é æœŸçµæœ**: topic.id ä¸ç‚º Noneï¼Œtitle æ­£ç¢ºï¼Œowner_id å’Œ club_id æ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_14.2: æ¸¬è©¦å»ºç«‹å›è¦†

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦å»ºç«‹å›è¦†
- **åŸå§‹å‡½å¼åç¨±**: `test_create_reply`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ä¸»é¡Œ
  2. èª¿ç”¨ create_comment()
  3. é©—è­‰å›è¦†è³‡æ–™
- **é æœŸçµæœ**: comment.id ä¸ç‚º Noneï¼Œcontent æ­£ç¢ºï¼Œtopic_id å’Œ owner_id æ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_14.3: æ¸¬è©¦ç²å–è®€æ›¸æœƒçš„è¨è«–ä¸»é¡Œåˆ—è¡¨

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–è®€æ›¸æœƒçš„è¨è«–ä¸»é¡Œåˆ—è¡¨
- **åŸå§‹å‡½å¼åç¨±**: `test_get_topics_by_club`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ 2 å€‹ä¸»é¡Œ
  2. èª¿ç”¨ get_topics_by_club()
  3. é©—è­‰æ•¸é‡å’Œé †åº
- **é æœŸçµæœ**: è¿”å› 2 å€‹ä¸»é¡Œï¼Œæ¨™é¡Œæ­£ç¢º
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 15: Notification Service æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_notification_service.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 1

### TC_15.1: æ¸¬è©¦æ–°åŠ å…¥è«‹æ±‚æœƒç‚ºç®¡ç†å“¡å’Œæ“æœ‰è€…å‰µå»ºé€šçŸ¥

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æ–°åŠ å…¥è«‹æ±‚æœƒç‚ºç®¡ç†å“¡å’Œæ“æœ‰è€…å‰µå»ºé€šçŸ¥
- **åŸå§‹å‡½å¼åç¨±**: `test_notify_new_join_request_creates_notifications_for_admins`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹è®€æ›¸æœƒï¼ˆownerã€adminã€memberï¼‰
  2. å»ºç«‹åŠ å…¥è«‹æ±‚
  3. èª¿ç”¨ notify_new_join_request()
  4. é©—è­‰é€šçŸ¥
- **é æœŸçµæœ**: å‰µå»º 2 å€‹é€šçŸ¥ï¼ˆçµ¦ owner å’Œ adminï¼‰ï¼Œä¸çµ¦æ™®é€š memberï¼Œé€šçŸ¥å…§å®¹åŒ…å«ç”³è«‹äººå’Œè®€æ›¸æœƒè³‡è¨Šï¼Œis_read=False
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 16: Notifications API æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_notifications_api.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 4

### TC_16.1: æ¸¬è©¦ç²å–é€šçŸ¥åˆ—è¡¨è¿”å›ç•¶å‰ç”¨æˆ¶çš„é€šçŸ¥

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç²å–é€šçŸ¥åˆ—è¡¨è¿”å›ç•¶å‰ç”¨æˆ¶çš„é€šçŸ¥
- **åŸå§‹å‡½å¼åç¨±**: `test_get_notifications_returns_user_notifications`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. ç‚º 2 å€‹ç”¨æˆ¶å‰µå»ºé€šçŸ¥
  2. ä½¿ç”¨ user1 çš„ token èª¿ç”¨ GET /api/v1/notifications/
  3. é©—è­‰çµæœ
- **é æœŸçµæœ**: åªè¿”å› user1 çš„ 2 å€‹é€šçŸ¥ï¼Œä¸åŒ…å« user2 çš„é€šçŸ¥
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_16.2: æ¸¬è©¦é€šçŸ¥åˆ—è¡¨å¯ä»¥æŒ‰å·²è®€/æœªè®€ç‹€æ…‹ç¯©é¸

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦é€šçŸ¥åˆ—è¡¨å¯ä»¥æŒ‰å·²è®€/æœªè®€ç‹€æ…‹ç¯©é¸
- **åŸå§‹å‡½å¼åç¨±**: `test_get_notifications_filters_by_read_status`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºå·²è®€å’Œæœªè®€é€šçŸ¥
  2. ä½¿ç”¨ is_read=false ç¯©é¸
  3. ä½¿ç”¨ is_read=true ç¯©é¸
  4. é©—è­‰çµæœ
- **é æœŸçµæœ**: is_read=false è¿”å› 1 å€‹æœªè®€ï¼Œis_read=true è¿”å› 1 å€‹å·²è®€
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_16.3: æ¸¬è©¦æˆåŠŸæ¨™è¨˜é€šçŸ¥ç‚ºå·²è®€

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸæ¨™è¨˜é€šçŸ¥ç‚ºå·²è®€
- **åŸå§‹å‡½å¼åç¨±**: `test_mark_notification_as_read_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºæœªè®€é€šçŸ¥
  2. èª¿ç”¨ POST /api/v1/notifications/{id}/read
  3. é©—è­‰æ›´æ–°
- **é æœŸçµæœ**: è¿”å› 204ï¼Œè³‡æ–™åº«ä¸­ is_read=True
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

### TC_16.4: æ¸¬è©¦ç„¡æ³•æ¨™è¨˜å…¶ä»–ç”¨æˆ¶çš„é€šçŸ¥ç‚ºå·²è®€

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦ç„¡æ³•æ¨™è¨˜å…¶ä»–ç”¨æˆ¶çš„é€šçŸ¥ç‚ºå·²è®€
- **åŸå§‹å‡½å¼åç¨±**: `test_mark_notification_as_read_wrong_user`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å‰µå»ºå±¬æ–¼ user2 çš„é€šçŸ¥
  2. ä½¿ç”¨ user1 çš„ token å˜—è©¦æ¨™è¨˜
  3. æ•ç²éŒ¯èª¤
- **é æœŸçµæœ**: è¿”å› 404
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## æ¨¡çµ„ 17: Avatar Upload æ¸¬è©¦

**æ¸¬è©¦æª”æ¡ˆ**: `tests/unit/test_avatar_upload.py`  
**æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 1

### TC_17.1: æ¸¬è©¦æˆåŠŸä¸Šå‚³é ­åƒ (PNG)

- **æ¸¬è©¦æ¡ˆä¾‹åç¨±**: æ¸¬è©¦æˆåŠŸä¸Šå‚³é ­åƒ (PNG)
- **åŸå§‹å‡½å¼åç¨±**: `test_upload_avatar_success`
- **æ¸¬è©¦æ­¥é©Ÿ**:
  1. å»ºç«‹ mock UploadFile (1x1 é€æ˜ PNG)
  2. èª¿ç”¨ upload_avatar()
  3. é©—è­‰ avatar_url
- **é æœŸçµæœ**: avatar_url ä¸ç‚º Noneï¼Œä»¥ https://res.cloudinary.com/ é–‹é ­ï¼Œä»¥ .png çµå°¾
- **å¯¦éš›åŸ·è¡Œçµæœ**: âœ… PASSED

---

## ğŸ“Š æ¸¬è©¦åŸ·è¡Œæ‘˜è¦

### æ¸¬è©¦çµ±è¨ˆ

- **ç¸½æ¸¬è©¦æ¡ˆä¾‹æ•¸**: 103
- **é€šé**: 103 âœ…
- **å¤±æ•—**: 0
- **è·³é**: 0
- **é€šéç‡**: 100%
- **åŸ·è¡Œæ™‚é–“**: ~9.33 ç§’

### æ¨¡çµ„è¦†è“‹ç‡

| æ¨¡çµ„åç¨± | æ¸¬è©¦æ¡ˆä¾‹æ•¸ | é€šéç‡ |
|---------|-----------|--------|
| User Service | 2 | 100% |
| User Model | 4 | 100% |
| User Profile Service | 6 | 100% |
| Book Club Service | 16 | 100% |
| Book Club List Service | 9 | 100% |
| Event Service | 13 | 100% |
| Event Participation | 7 | 100% |
| Event Update Delete | 9 | 100% |
| User Event Service | 6 | 100% |
| Password Reset Service | 12 | 100% |
| Email Service | 2 | 100% |
| Interest Tag Service | 6 | 100% |
| Dashboard Service | 3 | 100% |
| Discussion Service | 3 | 100% |
| Notification Service | 1 | 100% |
| Notifications API | 4 | 100% |
| Avatar Upload | 1 | 100% |

### ç¨‹å¼ç¢¼è¦†è“‹ç‡

- **æ•´é«”è¦†è“‹ç‡**: 84.40%
- **Services æ¨¡çµ„**: 80.55%
- **Models æ¨¡çµ„**: 96.42%
- **Schemas æ¨¡çµ„**: 96.74%
- **API æ¨¡çµ„**: 81.65%
- **Core æ¨¡çµ„**: 79.90%

---

## ğŸ”§ æ¸¬è©¦åŸ·è¡ŒæŒ‡ä»¤

### åŸ·è¡Œæ‰€æœ‰å–®å…ƒæ¸¬è©¦

```bash
cd backend
docker-compose exec api pytest tests/unit/ -v
```

### åŸ·è¡Œç‰¹å®šæ¨¡çµ„æ¸¬è©¦

```bash
# User Service
docker-compose exec api pytest tests/unit/test_user_service.py -v

# Book Club Service
docker-compose exec api pytest tests/unit/test_book_club_service.py -v

# Event Service
docker-compose exec api pytest tests/unit/test_event_service.py -v
```

### ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š

```bash
docker-compose exec api pytest tests/unit/ --cov=app --cov-report=html --cov-report=term -v
```

---

## ğŸ“ æ¸¬è©¦ç¶­è­·æŒ‡å—

### æ–°å¢æ¸¬è©¦æ¡ˆä¾‹æ™‚çš„æ³¨æ„äº‹é …

1. **æ¸¬è©¦ç·¨è™Ÿ**: æŒ‰ç…§æ¨¡çµ„é †åºç·¨è™Ÿï¼ˆTC_X.Yï¼‰
2. **æ¸¬è©¦åç¨±**: ä½¿ç”¨ `test_<function>_<scenario>` æ ¼å¼
3. **æ¸¬è©¦èªªæ˜**: ç°¡æ½”æè¿°æ¸¬è©¦ç›®çš„
4. **æ¸¬è©¦æ­¥é©Ÿ**: ä½¿ç”¨ç·¨è™Ÿåˆ—è¡¨ï¼Œæ¸…æ¥šèªªæ˜æ¯å€‹æ­¥é©Ÿ
5. **é æœŸçµæœ**: æ˜ç¢ºå®šç¾©æˆåŠŸæ¢ä»¶
6. **åŸ·è¡Œçµæœ**: æ¨™è¨˜ âœ… PASSED æˆ– âŒ FAILED

### æ¸¬è©¦æ¡ˆä¾‹æ›´æ–°æµç¨‹

1. ä¿®æ”¹æ¸¬è©¦ç¨‹å¼ç¢¼
2. åŸ·è¡Œæ¸¬è©¦é©—è­‰
3. æ›´æ–°æœ¬æ–‡ä»¶çš„æ¸¬è©¦æ¡ˆä¾‹èªªæ˜
4. æ›´æ–°åŸ·è¡Œçµæœæ¬„ä½
5. æäº¤ Git commit

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [å–®å…ƒæ¸¬è©¦è¨ˆåŠƒ](./unit-test-plan.md)
- [æ¸¬è©¦è¨ˆç•« v1.0](./test-plan-v1.md)
- [å¾Œç«¯æ¶æ§‹è¨­è¨ˆ](../architecture.md)
- [PRD v4.1](../prd/)

---

**æ–‡ä»¶ç‰ˆæœ¬**: v1.0  
**æœ€å¾Œæ›´æ–°**: 2025-12-20  
**ç¶­è­·è€…**: QA Team  
**ä¸‹æ¬¡å¯©æŸ¥**: 2026-01-20
