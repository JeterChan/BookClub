# Story 1.7.1: 儀表板 UI 與資料修正

**Status:** Draft
**Epic:** Epic 1.7 - 儀表板體驗優化
**Story Points:** 5
**Priority:** 中
**Depends On:** N/A

---

## Story

**作為** 一個登入的用戶
**我想要** 看到一個佈局更合理、且顯示我個人真實資料的儀表板
**以便於** 我可以快速掌握我的帳號狀態與平台核心功能

---

## Story Context

**Existing System Integration:**
- **整合系統:** 本 Story 將修改現有的個人儀表板頁面 (`frontend/src/pages/Dashboard.tsx`)。
- **技術棧:** React, Zustand, FastAPI, SQLModel。
- **既有模式:** 資料流應遵循現有的模式：由 `Dashboard.tsx` 觸發 `useDashboardStore` (或相關 store) 的 action，該 action 呼叫 `dashboardService` 中的 API 請求，後端 `dashboard_service.py` 處理業務邏輯並從資料庫獲取資料。
- **接觸點:** 
  - `frontend/src/pages/Dashboard.tsx`
  - `frontend/src/store/dashboardStore.ts` (或需新建)
  - `frontend/src/services/dashboardService.ts` (或需新建)
  - `backend/app/api/endpoints/dashboard.py`
  - `backend/app/services/dashboard_service.py`

---

## Acceptance Criteria

**功能需求:**
1.  **AC1 - 真實資料:** 儀表板必須顯示當前登入使用者的**真實**個人資訊，包括頭像、顯示名稱、Email 和帳號建立日期。
2.  **AC2 - 移除書籍區塊:** 儀表板上現有的「閱讀書籍」區塊必須被**移除**。
3.  **AC3 - 新 UI 佈局:** 儀表板頁面佈局需調整為兩欄式。左側為主要內容區（例如平台功能導航），右側為使用者資訊區。
4.  **AC4 - 垂直資訊排版:** 右側的使用者資訊區塊應改為**垂直排版**，並包含頭像、顯示名稱、Email 和加入日期。

**品質需求:**
5.  **AC5 - 測試覆蓋:** 所有新的或修改過的前後端邏輯都必須有對應的單元測試或整合測試。
6.  **AC6 - 無迴歸:** 現有的其他功能（如登入、個人檔案管理）不能因此 Story 而產生問題。

---

## Tasks / Subtasks

### Task 1: Backend - API 修正
- [ ] 1.1 **(AC1)** 審查 `backend/app/api/endpoints/dashboard.py` 中的 `GET /api/users/me/dashboard` 端點。
- [ ] 1.2 **(AC1)** 確保 `dashboard_service.py` 中的 `get_user_dashboard` 函式能正確從資料庫中查詢並回傳當前登入使用者的真實資訊（頭像、名稱、Email、建立日期）。
- [ ] 1.3 **(AC5)** 在 `backend/tests/integration/test_dashboard_api.py` 中，修改或新增測試，驗證儀表板 API 回傳的是真實、個人化的資料，而不是固定的假資料。

### Task 2: Frontend - UI 與邏輯實作
- [ ] 2.1 **(AC3, AC4)** 修改 `frontend/src/pages/Dashboard.tsx` 的 JSX 結構，將其調整為兩欄式佈局，並將使用者資訊區塊移至右側，改為垂直排版。
- [ ] 2.2 **(AC2)** 從 `Dashboard.tsx` 中移除「閱讀書籍」相關的元件與邏輯。
- [ ] 2.3 **(AC1)** 確保 `dashboardStore` (或相關 store) 能正確發起 API 請求，並將從後端獲取的真實使用者資料呈現在儀表板上。
- [ ] 2.4 **(AC5)** 為 `Dashboard.tsx` 的 UI 佈局和資料呈現新增或修改對應的前端測試。

---

## Technical Notes

- **整合方法:** 前端應透過呼叫後端 `/api/users/me/dashboard` 端點來獲取資料。後端服務需確保在查詢時使用已認證的使用者 ID。
- **既有模式參考:** 請參考 `frontend/src/pages/Profile.tsx` 及其相關的 store 和 service，它們展示了如何獲取並呈現使用者特定的資訊。
- **關鍵限制:** UI 佈局應使用 Tailwind CSS 的 Flexbox 或 Grid 系統來實現，以符合專案現有的樣式作法。

---

## Definition of Done

- [ ] 所有功能需求 (AC1-AC4) 皆已滿足。
- [ ] 所有品質需求 (AC5-AC6) 皆已驗證。
- [ ] 程式碼遵循專案既有的模式與標準。
- [ ] 所有相關測試（既有與新增）皆已通過。
- [ ] 若有需要，相關文件已更新。
